{"ast":null,"code":"import _defineProperty from\"C:/Users/Faisal/Desktop/fullstack Projects/Diary Software/my-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Faisal/Desktop/fullstack Projects/Diary Software/my-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Faisal/Desktop/fullstack Projects/Diary Software/my-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Faisal/Desktop/fullstack Projects/Diary Software/my-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Faisal\\\\Desktop\\\\fullstack Projects\\\\Diary Software\\\\my-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import'./RelativesKhata.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RelativesKhata=function RelativesKhata(){var _useState=useState(function(){var today=new Date();var day=String(today.getDate()).padStart(2,'0');var month=String(today.getMonth()+1).padStart(2,'0');//January is 0!\n//January is 0!\nvar year=today.getFullYear();return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),source=_useState4[0],setSource=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),quantity=_useState6[0],setQuantity=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),amount=_useState8[0],setAmount=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),expenses=_useState10[0],setExpenses=_useState10[1];var _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),editIndex=_useState12[0],setEditIndex=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showAlert=_useState14[0],setShowAlert=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),deleteIndex=_useState16[0],setDeleteIndex=_useState16[1];var _useState17=useState({}),_useState18=_slicedToArray(_useState17,2),groupVisibility=_useState18[0],setGroupVisibility=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showMonthlySales=_useState20[0],setShowMonthlySales=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),globalVisibility=_useState22[0],setGlobalVisibility=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),showModal=_useState24[0],setShowModal=_useState24[1];// You already have this for controlling the visibility of the modal\nvar _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),modalMessage=_useState26[0],setModalMessage=_useState26[1];// Add this line to manage the modal message\nvar _useState27=useState('English'),_useState28=_slicedToArray(_useState27,2),language=_useState28[0],setLanguage=_useState28[1];var translations={English:{date:\"Date\",name:\"Name\",quantity:\"Quantity\",pricePerKilo:\"Price per kilo\",save:\"Save\",monthlyRelativesSale:\"Monthly Relatives Sale\",overallRelativesSale:\"Overall Relatives Sale\",showAll:\"Show All\",hideAll:\"Hide All\",show:\"Show \",hide:\"Hide \",delete:\"Delete\",update:\"Update\",deletePrompt:\"Are you sure you want to delete this?\",yes:\"Yes\",no:\"No\",total:\"Total\",relativeName:\"Relative Name\",enterRelativeName:\"Enter Relative Name\",enterQuantity:\"Enter Quantity\",enterPricePerKilo:\"Enter Price per kilo\",relativesKhata:\"Relatives Sales\",KiloMilk:\"Kilo Milk\",kaa:\"of\",added:\"has been added\",In:\"In\",expens:\"Expense\",record:\"Record has been updated\"},Urdu:{date:\"تاریخ\",name:\"نام\",quantity:\"مقدار\",pricePerKilo:\"فی کلو قیمت\",save:\"محفوظ کریں\",monthlyRelativesSale:\"ماہانہ رشتہ داروں کی فروخت\",overallRelativesSale:\"کل رشتہ داروں کی فروخت\",showAll:\"سب دیکھیں\",hideAll:\"سب چھپائیں\",show:\"دیکھیں\",hide:\"چھپائیں\",delete:\"حذف کریں\",update:\"اپ ڈیٹ\",deletePrompt:\"کیا آپ واقعی اس  کو حذف کرنا چاہتے ہیں؟\",yes:\"ہاں\",no:\"نہیں\",relativeName:\"رشتہ دار کا نام\",enterRelativeName:\"رشتہ دار کا نام درج کریں\",enterQuantity:\"مقدار درج کریں\",enterPricePerKilo:\"فی کلو قیمت درج کریں\",relativesKhata:\"رشتہ داروں کی فروخت\",total:\"کل\",KiloMilk:\"کلو دودھ\",kaa:\"کا\",added:\" شامل ہوگیا ہے\",In:\"میں\",record:\"ریکارڈ اپ ڈیٹ ہو گیا ہے\"}};var monthTranslations={January:\"جنوری\",February:\"فروری\",March:\"مارچ\",April:\"اپریل\",May:\"مئی\",June:\"جون\",July:\"جولائی\",August:\"اگست\",September:\"ستمبر\",October:\"اکتوبر\",November:\"نومبر\",December:\"دسمبر\"};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data,processedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:3001/relatives');case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 6:_context.next=8;return response.json();case 8:data=_context.sent;processedData=data.map(function(expense){return _objectSpread(_objectSpread({},expense),{},{Quantity:parseFloat(expense.Quantity),RUnitPrice:parseFloat(expense.RUnitPrice),RTotal:expense.RTotal?parseFloat(expense.RTotal).toFixed(2):undefined});});setExpenses(processedData);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error('There was an error fetching the sales data:',_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var toggleGroupVisibility=function toggleGroupVisibility(monthYear){setGlobalVisibility(function(prevGlobalState){if(!prevGlobalState){// If global visibility is off, ensure it stays off and don't toggle individual groups\nconsole.warn(\"Global visibility is off. Can't toggle individual group visibility.\");return prevGlobalState;}// If global visibility is on, toggle the specific month/year group\nsetGroupVisibility(function(prevGroupVisibility){return _objectSpread(_objectSpread({},prevGroupVisibility),{},_defineProperty({},monthYear,!prevGroupVisibility[monthYear]));});return prevGlobalState;// Return the unchanged global state\n});};var CustomModal=function CustomModal(_ref2){var message=_ref2.message,onClose=_ref2.onClose;return/*#__PURE__*/_jsx(\"div\",{className:\"custom-modal-overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"custom-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-modal-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"Close\"})]})})});};// Group expenses by month and year\nvar groupedExpenses=expenses.reduce(function(acc,expense){// Ensure the date string is in the correct format (YYYY-MM-DD)\nvar expenseDate=expense.Date;// Adjust if the API gives a different property name for the date\nvar date=new Date(expenseDate);if(isNaN(date.getTime())){console.error('Invalid date for expense:',expense);return acc;// Skip this expense if the date is invalid\n}var monthYear=\"\".concat(date.toLocaleString('default',{month:'long',year:'numeric'}));if(!acc[monthYear]){acc[monthYear]=[];}acc[monthYear].push(expense);return acc;},{});var handleSave=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var expensePayload,response,expenseId,monthYear,alertMessage,_monthYear,_alertMessage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();expensePayload={Date:date,Rname:source,Quantity:parseFloat(quantity),RUnitPrice:parseFloat(amount)};_context2.prev=2;if(!(editIndex>=0)){_context2.next=14;break;}// Assuming your expense objects use 'idConsumersSale' as the key for ID\nexpenseId=expenses[editIndex].idRelatives;// Adjust this line accordingly\n_context2.next=7;return fetch(\"http://localhost:3001/relatives/\".concat(expenseId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(expensePayload)});case 7:response=_context2.sent;monthYear=new Date(date).toLocaleString('default',{month:'long',year:'numeric'});alertMessage=\"\".concat(translations[language].record,\" \");// Replace alert(alertMessage); with:\nsetModalMessage(alertMessage);setShowModal(true);_context2.next=21;break;case 14:_context2.next=16;return fetch('http://localhost:3001/relatives',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(expensePayload)});case 16:response=_context2.sent;_monthYear=new Date(date).toLocaleString('default',{month:'long',year:'numeric'});_alertMessage=\"\".concat(quantity,\" \").concat(translations[language].KiloMilk,\" \").concat(translations[language].added);// Replace alert(alertMessage); with:\nsetModalMessage(_alertMessage);setShowModal(true);case 21:if(response.ok){_context2.next=23;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 23:_context2.next=25;return fetchData();case 25:// Refresh data\n// Reset form fields and editIndex\n//setDate('');\nsetSource('');setQuantity('');setAmount('');setEditIndex(-1);_context2.next=34;break;case 31:_context2.prev=31;_context2.t0=_context2[\"catch\"](2);console.error('There was an error saving the sale:',_context2.t0);case 34:case\"end\":return _context2.stop();}}},_callee2,null,[[2,31]]);}));return function handleSave(_x){return _ref3.apply(this,arguments);};}();var handleDelete=function handleDelete(index){setShowAlert(true);setDeleteIndex(index);};var handleAlertConfirm=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(isConfirmed){var expense,response,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(isConfirmed&&deleteIndex!=null)){_context3.next=23;break;}expense=expenses[deleteIndex];if(!(expense&&expense.idRelatives)){_context3.next=22;break;}_context3.prev=3;_context3.next=6;return fetch(\"http://localhost:3001/relatives/\".concat(expense.idRelatives),{method:'DELETE',headers:{'Content-Type':'application/json'}});case 6:response=_context3.sent;if(response.ok){_context3.next=9;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 9:_context3.next=11;return response.json();case 11:result=_context3.sent;console.log(result.message);// Log the message from the backend\n// Refresh the expenses list after deleting an expense\n_context3.next=15;return fetchData();case 15:_context3.next=20;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](3);console.error('There was an error deleting the sale:',_context3.t0);case 20:_context3.next=23;break;case 22:console.error('Attempted to delete an expense without a valid ID');case 23:// Reset the state regardless of whether the delete was successful or not\nsetDeleteIndex(null);setShowAlert(false);case 25:case\"end\":return _context3.stop();}}},_callee3,null,[[3,17]]);}));return function handleAlertConfirm(_x2){return _ref4.apply(this,arguments);};}();var getMonthlyExpenses=function getMonthlyExpenses(){var monthlyExpenses=expenses.reduce(function(acc,expense){// Check if the date is valid\nvar date=new Date(expense.Date);if(isNaN(date.getTime())){console.error('Invalid date for expense:',expense);return acc;// Skip this expense if the date is invalid\n}var monthYear=\"\".concat(date.toLocaleString('default',{month:'long'}),\" \").concat(date.getFullYear());var expenseQuantity=parseFloat(expense.Quantity);var expenseUnitPrice=parseFloat(expense.RUnitPrice);var monthlyTotal=!isNaN(expenseQuantity)&&!isNaN(expenseUnitPrice)?expenseQuantity*expenseUnitPrice:0;if(!acc[monthYear]){acc[monthYear]=0;}acc[monthYear]+=monthlyTotal;return acc;},{});return monthlyExpenses;};var getOverallExpenses=function getOverallExpenses(){return expenses.reduce(function(acc,expense){var expenseQuantity=parseFloat(expense.Quantity);var expenseUnitPrice=parseFloat(expense.RUnitPrice);var total=expenseQuantity&&expenseUnitPrice?expenseQuantity*expenseUnitPrice:0;return acc+total;},0);};var handleUpdate=function handleUpdate(index){var expense=expenses[index];setDate(expense.Date);setSource(expense.Rname);// Corrected: ensure this matches your data structure\nsetQuantity(expense.Quantity.toString());setAmount(expense.RUnitPrice.toString());setEditIndex(index);};var toggleGlobalVisibility=function toggleGlobalVisibility(){setGlobalVisibility(function(prevState){var newState=!prevState;// Update all group visibilities based on the new global state\nvar newGroupVisibility=Object.keys(groupVisibility).reduce(function(acc,key){acc[key]=newState;// Show or hide all based on the new global state\nreturn acc;},{});setGroupVisibility(newGroupVisibility);return newState;});};var toggleMonthlySalesVisibility=function toggleMonthlySalesVisibility(){setShowMonthlySales(function(prevShow){return!prevShow;});// Toggle the visibility state\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"expenditure-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"expenditure-title\",children:translations[language].relativesKhata}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setLanguage(function(lang){return lang==='English'?'Urdu':'English';});},className:\"language-toggle\",children:language==='English'?'اردو':'English'}),/*#__PURE__*/_jsxs(\"form\",{className:\"expenditure-form\",onSubmit:handleSave,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"expenditure-label\",children:translations[language].date}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);},className:\"expenditure-input date-input\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"source\",className:\"expenditure-label\",children:translations[language].name}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"source\",value:source,onChange:function onChange(e){return setSource(e.target.value);},className:\"expenditure-input\",placeholder:translations[language].relativeName,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",className:\"expenditure-label\",children:translations[language].quantity}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",value:quantity,onChange:function onChange(e){return setQuantity(e.target.value);},className:\"expenditure-input\",placeholder:translations[language].enterQuantity,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",className:\"expenditure-label\",children:translations[language].pricePerKilo}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"amount\",value:amount,onChange:function onChange(e){return setAmount(e.target.value);},className:\"expenditure-input\",placeholder:translations[language].enterPricePerKilo,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",children:translations[language].save})]}),showModal&&/*#__PURE__*/_jsx(CustomModal,{message:modalMessage,onClose:function onClose(){return setShowModal(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"expenses-report\",children:[/*#__PURE__*/_jsx(\"h4\",{children:translations[language].monthlyRelativesSale}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleMonthlySalesVisibility,className:\"toggle-all-button\",children:showMonthlySales?translations[language].hideAll:translations[language].showAll}),showMonthlySales&&Object.entries(getMonthlyExpenses()).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),monthYear=_ref6[0],total=_ref6[1];// Split month and year\nvar _monthYear$split=monthYear.split(' '),_monthYear$split2=_slicedToArray(_monthYear$split,2),month=_monthYear$split2[0],year=_monthYear$split2[1];// Translate the month name if available, otherwise, use the original name\nvar translatedMonth=language==='Urdu'?monthTranslations[month]||month:month;// Combine translated month and year\nvar translatedMonthYear=\"\".concat(translatedMonth,\" \").concat(year);return/*#__PURE__*/_jsxs(\"div\",{style:{color:'green'},children:[translations[language].monthlySales,\" \",translatedMonthYear,\" : \",total]},monthYear);}),/*#__PURE__*/_jsxs(\"h4\",{children:[translations[language].overallRelativesSale,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:getOverallExpenses()})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleGlobalVisibility,className:\"global-toggle-button\",children:globalVisibility?translations[language].hideAll:translations[language].showAll}),globalVisibility&&Object.entries(groupedExpenses).map(function(_ref7){var _ref8=_slicedToArray(_ref7,2),monthYear=_ref8[0],expensesList=_ref8[1];return(// Move the statements outside of JSX\nfunction(){var monthYearArray=monthYear.split(' ');var month=monthYearArray[0];var year=monthYearArray[1];// Translate the month name if the current language is Urdu\nvar translatedMonthName=language==='Urdu'?monthTranslations[month]||month:month;// Reconstruct the monthYear string with the possibly translated month name\nvar displayMonthYear=\"\".concat(translatedMonthName,\" \").concat(year);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginTop:15},children:[displayMonthYear,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return toggleGroupVisibility(monthYear);},className:\"toggle-button\",children:groupVisibility[monthYear]?translations[language].hide:translations[language].show})]}),groupVisibility[monthYear]&&/*#__PURE__*/_jsx(\"div\",{className:\"expenses-display\",children:expensesList.map(function(expense,index){var actualIndex=expenses.findIndex(function(e){return e===expense;});var total=expense.quantity*expense.amount;return/*#__PURE__*/_jsxs(\"div\",{className:\"expense-card\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[translations[language].date,\" : \",expense.Date]}),/*#__PURE__*/_jsxs(\"div\",{children:[translations[language].name,\" : \",expense.Rname]}),/*#__PURE__*/_jsxs(\"div\",{children:[translations[language].quantity,\" : \",expense.Quantity]}),/*#__PURE__*/_jsxs(\"div\",{children:[translations[language].pricePerKilo,\" : \",expense.RUnitPrice]}),/*#__PURE__*/_jsxs(\"div\",{children:[translations[language].total,\" :  \",expense.RTotal]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleDelete(actualIndex);},className:\"delete-button1\",children:[translations[language].delete,\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleUpdate(actualIndex);},className:\"update-button\",children:[translations[language].update,\" \"]})]},index);})})]},monthYear);}());}),showAlert&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert-dialog\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[translations[language].deletePrompt,\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleAlertConfirm(true);},className:\"confirm-yes\",children:[translations[language].yes,\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleAlertConfirm(false);},className:\"confirm-no\",children:[translations[language].no,\" \"]})]})]});};export default RelativesKhata;","map":{"version":3,"sources":["C:/Users/Faisal/Desktop/fullstack Projects/Diary Software/my-frontend/src/RelativesKhata.jsx"],"names":["React","useState","useEffect","RelativesKhata","today","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","date","setDate","source","setSource","quantity","setQuantity","amount","setAmount","expenses","setExpenses","editIndex","setEditIndex","showAlert","setShowAlert","deleteIndex","setDeleteIndex","groupVisibility","setGroupVisibility","showMonthlySales","setShowMonthlySales","globalVisibility","setGlobalVisibility","showModal","setShowModal","modalMessage","setModalMessage","language","setLanguage","translations","English","name","pricePerKilo","save","monthlyRelativesSale","overallRelativesSale","showAll","hideAll","show","hide","delete","update","deletePrompt","yes","no","total","relativeName","enterRelativeName","enterQuantity","enterPricePerKilo","relativesKhata","KiloMilk","kaa","added","In","expens","record","Urdu","monthTranslations","January","February","March","April","May","June","July","August","September","October","November","December","fetchData","fetch","response","ok","Error","status","json","data","processedData","map","expense","Quantity","parseFloat","RUnitPrice","RTotal","toFixed","undefined","console","error","toggleGroupVisibility","monthYear","prevGlobalState","warn","prevGroupVisibility","CustomModal","message","onClose","groupedExpenses","reduce","acc","expenseDate","isNaN","getTime","toLocaleString","push","handleSave","e","preventDefault","expensePayload","Rname","expenseId","idRelatives","method","headers","body","JSON","stringify","alertMessage","handleDelete","index","handleAlertConfirm","isConfirmed","result","log","getMonthlyExpenses","monthlyExpenses","expenseQuantity","expenseUnitPrice","monthlyTotal","getOverallExpenses","handleUpdate","toString","toggleGlobalVisibility","prevState","newState","newGroupVisibility","Object","keys","key","toggleMonthlySalesVisibility","prevShow","lang","target","value","entries","split","translatedMonth","translatedMonthYear","color","monthlySales","expensesList","monthYearArray","translatedMonthName","displayMonthYear","marginTop","actualIndex","findIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './RelativesKhata.css';\r\n\r\nconst RelativesKhata = () => {\r\n  const [date, setDate] = useState(() => {\r\n    const today = new Date();\r\n    const day = String(today.getDate()).padStart(2, '0');\r\n    const month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n    const year = today.getFullYear();\r\n\r\n    return `${year}-${month}-${day}`;\r\n  });\r\n  const [source, setSource] = useState('');\r\n  const [quantity, setQuantity] = useState('');\r\n  const [amount, setAmount] = useState('');\r\n  const [expenses, setExpenses] = useState([]);\r\n  const [editIndex, setEditIndex] = useState(-1);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [deleteIndex, setDeleteIndex] = useState(null);\r\n  const [groupVisibility, setGroupVisibility] = useState({});\r\n  const [showMonthlySales, setShowMonthlySales] = useState(false);\r\n  const [globalVisibility, setGlobalVisibility] = useState(false);\r\n  const [showModal, setShowModal] = useState(false); // You already have this for controlling the visibility of the modal\r\n  const [modalMessage, setModalMessage] = useState(''); // Add this line to manage the modal message\r\n  const [language, setLanguage] = useState('English');\r\n  const translations = {\r\n    English: {\r\n      date: \"Date\",\r\n      name: \"Name\",\r\n      quantity: \"Quantity\",\r\n      pricePerKilo: \"Price per kilo\",\r\n      save: \"Save\",\r\n      monthlyRelativesSale: \"Monthly Relatives Sale\",\r\n      overallRelativesSale: \"Overall Relatives Sale\",\r\n      showAll: \"Show All\",\r\n      hideAll: \"Hide All\",\r\n      show: \"Show \",\r\n      hide: \"Hide \",\r\n      delete: \"Delete\",\r\n      update: \"Update\",\r\n      deletePrompt: \"Are you sure you want to delete this?\",\r\n      yes: \"Yes\",\r\n      no: \"No\",\r\n      total: \"Total\",\r\n      relativeName: \"Relative Name\",\r\n      enterRelativeName: \"Enter Relative Name\",\r\n      enterQuantity: \"Enter Quantity\",\r\n      enterPricePerKilo: \"Enter Price per kilo\",\r\n      relativesKhata: \"Relatives Sales\",\r\n      KiloMilk:  \"Kilo Milk\", \r\n      kaa: \"of\",\r\n      added: \"has been added\",\r\n      In: \"In\", \r\n      expens : \"Expense\",\r\n      record: \"Record has been updated\",\r\n    },\r\n    Urdu: {\r\n      date: \"تاریخ\",\r\n      name: \"نام\",\r\n      quantity: \"مقدار\",\r\n      pricePerKilo: \"فی کلو قیمت\",\r\n      save: \"محفوظ کریں\",\r\n      monthlyRelativesSale: \"ماہانہ رشتہ داروں کی فروخت\",\r\n      overallRelativesSale: \"کل رشتہ داروں کی فروخت\",\r\n      showAll: \"سب دیکھیں\",\r\n      hideAll: \"سب چھپائیں\",\r\n      show: \"دیکھیں\",\r\n      hide: \"چھپائیں\",\r\n      delete: \"حذف کریں\",\r\n      update: \"اپ ڈیٹ\",\r\n      deletePrompt: \"کیا آپ واقعی اس  کو حذف کرنا چاہتے ہیں؟\",\r\n      yes: \"ہاں\",\r\n      no: \"نہیں\",\r\n      relativeName: \"رشتہ دار کا نام\",\r\n      enterRelativeName: \"رشتہ دار کا نام درج کریں\",\r\n      enterQuantity: \"مقدار درج کریں\",\r\n      enterPricePerKilo: \"فی کلو قیمت درج کریں\",\r\n      relativesKhata:   \"رشتہ داروں کی فروخت\",\r\n      total: \"کل\",\r\n      KiloMilk: \"کلو دودھ\",\r\n      kaa: \"کا\",\r\n      added: \" شامل ہوگیا ہے\",\r\n      In: \"میں\",\r\n      record: \"ریکارڈ اپ ڈیٹ ہو گیا ہے\",\r\n    }\r\n  };\r\n  const monthTranslations = {\r\n    January: \"جنوری\",\r\n    February: \"فروری\",\r\n    March: \"مارچ\",\r\n    April: \"اپریل\",\r\n    May: \"مئی\",\r\n    June: \"جون\",\r\n    July: \"جولائی\",\r\n    August: \"اگست\",\r\n    September: \"ستمبر\",\r\n    October: \"اکتوبر\",\r\n    November: \"نومبر\",\r\n    December: \"دسمبر\",\r\n  };\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:3001/relatives');\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      const processedData = data.map(expense => ({\r\n        ...expense,\r\n        Quantity: parseFloat(expense.Quantity),\r\n        RUnitPrice: parseFloat(expense.RUnitPrice),\r\n        RTotal: expense.RTotal ? parseFloat(expense.RTotal).toFixed(2) : undefined\r\n      }));\r\n      setExpenses(processedData);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the sales data:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const toggleGroupVisibility = (monthYear) => {\r\n    setGlobalVisibility(prevGlobalState => {\r\n      if (!prevGlobalState) {\r\n        // If global visibility is off, ensure it stays off and don't toggle individual groups\r\n        console.warn(\"Global visibility is off. Can't toggle individual group visibility.\");\r\n        return prevGlobalState;\r\n      }\r\n\r\n      // If global visibility is on, toggle the specific month/year group\r\n      setGroupVisibility(prevGroupVisibility => ({\r\n        ...prevGroupVisibility,\r\n        [monthYear]: !prevGroupVisibility[monthYear]\r\n      }));\r\n\r\n      return prevGlobalState; // Return the unchanged global state\r\n    });\r\n  };\r\n  const CustomModal = ({ message, onClose }) => {\r\n    return (\r\n      <div className=\"custom-modal-overlay\">\r\n        <div className=\"custom-modal\">\r\n           <div className=\"custom-modal-content\">\r\n            <p>{message}</p>\r\n            <button onClick={onClose}>Close</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  // Group expenses by month and year\r\n  const groupedExpenses = expenses.reduce((acc, expense) => {\r\n    // Ensure the date string is in the correct format (YYYY-MM-DD)\r\n    const expenseDate = expense.Date; // Adjust if the API gives a different property name for the date\r\n    const date = new Date(expenseDate);\r\n\r\n    if (isNaN(date.getTime())) {\r\n      console.error('Invalid date for expense:', expense);\r\n      return acc; // Skip this expense if the date is invalid\r\n    }\r\n\r\n    const monthYear = `${date.toLocaleString('default', { month: 'long', year: 'numeric' })}`;\r\n    if (!acc[monthYear]) {\r\n      acc[monthYear] = [];\r\n    }\r\n    acc[monthYear].push(expense);\r\n\r\n    return acc;\r\n  }, {});\r\n  const handleSave = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const expensePayload = {\r\n      Date: date,\r\n      Rname: source,\r\n      Quantity: parseFloat(quantity),\r\n      RUnitPrice: parseFloat(amount),\r\n    };\r\n\r\n    try {\r\n      let response;\r\n      if (editIndex >= 0) {\r\n        // Assuming your expense objects use 'idConsumersSale' as the key for ID\r\n        const expenseId = expenses[editIndex].idRelatives; // Adjust this line accordingly\r\n        response = await fetch(`http://localhost:3001/relatives/${expenseId}`, {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(expensePayload),\r\n        });\r\n\r\n        const monthYear = new Date(date).toLocaleString('default', { month: 'long', year: 'numeric' });\r\n        const alertMessage = `${translations[language].record} `;\r\n  \r\n        // Replace alert(alertMessage); with:\r\n        setModalMessage(alertMessage);\r\n        setShowModal(true);\r\n\r\n      } else {\r\n        // Adding a new expense\r\n        response = await fetch('http://localhost:3001/relatives', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(expensePayload),\r\n        });\r\n\r\n      const monthYear = new Date(date).toLocaleString('default', { month: 'long', year: 'numeric' });\r\n      const alertMessage = `${quantity} ${translations[language].KiloMilk} ${translations[language].added}`;\r\n\r\n      // Replace alert(alertMessage); with:\r\n      setModalMessage(alertMessage);\r\n      setShowModal(true);\r\n\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      await fetchData(); // Refresh data\r\n\r\n      // Reset form fields and editIndex\r\n      //setDate('');\r\n      setSource('');\r\n      setQuantity('');\r\n      setAmount('');\r\n      setEditIndex(-1);\r\n      \r\n    } catch (error) {\r\n      console.error('There was an error saving the sale:', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (index) => {\r\n    setShowAlert(true);\r\n    setDeleteIndex(index);\r\n  };\r\n\r\n  const handleAlertConfirm = async (isConfirmed) => {\r\n    if (isConfirmed && deleteIndex != null) {\r\n      const expense = expenses[deleteIndex];\r\n      if (expense && expense.idRelatives) { // Make sure the ID field matches your data structure\r\n        try {\r\n          const response = await fetch(`http://localhost:3001/relatives/${expense.idRelatives}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n          }\r\n\r\n          const result = await response.json();\r\n          console.log(result.message); // Log the message from the backend\r\n\r\n          // Refresh the expenses list after deleting an expense\r\n          await fetchData();\r\n\r\n        } catch (error) {\r\n          console.error('There was an error deleting the sale:', error);\r\n        }\r\n      } else {\r\n        console.error('Attempted to delete an expense without a valid ID');\r\n      }\r\n    }\r\n\r\n    // Reset the state regardless of whether the delete was successful or not\r\n    setDeleteIndex(null);\r\n    setShowAlert(false);\r\n  };\r\n\r\n  const getMonthlyExpenses = () => {\r\n    const monthlyExpenses = expenses.reduce((acc, expense) => {\r\n      // Check if the date is valid\r\n      const date = new Date(expense.Date);\r\n      if (isNaN(date.getTime())) {\r\n        console.error('Invalid date for expense:', expense);\r\n        return acc; // Skip this expense if the date is invalid\r\n      }\r\n\r\n      const monthYear = `${date.toLocaleString('default', { month: 'long' })} ${date.getFullYear()}`;\r\n      const expenseQuantity = parseFloat(expense.Quantity);\r\n      const expenseUnitPrice = parseFloat(expense.RUnitPrice);\r\n      const monthlyTotal = !isNaN(expenseQuantity) && !isNaN(expenseUnitPrice) ? expenseQuantity * expenseUnitPrice : 0;\r\n\r\n      if (!acc[monthYear]) {\r\n        acc[monthYear] = 0;\r\n      }\r\n\r\n      acc[monthYear] += monthlyTotal;\r\n\r\n      return acc;\r\n    }, {});\r\n\r\n    return monthlyExpenses;\r\n  };\r\n\r\n  const getOverallExpenses = () => {\r\n    return expenses.reduce((acc, expense) => {\r\n      const expenseQuantity = parseFloat(expense.Quantity);\r\n      const expenseUnitPrice = parseFloat(expense.RUnitPrice);\r\n      const total = expenseQuantity && expenseUnitPrice ? expenseQuantity * expenseUnitPrice : 0;\r\n      return acc + total;\r\n    }, 0);\r\n  };\r\n\r\n  const handleUpdate = (index) => {\r\n    const expense = expenses[index];\r\n    setDate(expense.Date);\r\n    setSource(expense.Rname); // Corrected: ensure this matches your data structure\r\n    setQuantity(expense.Quantity.toString());\r\n    setAmount(expense.RUnitPrice.toString());\r\n    setEditIndex(index);\r\n  };\r\n  const toggleGlobalVisibility = () => {\r\n    setGlobalVisibility(prevState => {\r\n      const newState = !prevState;\r\n      // Update all group visibilities based on the new global state\r\n      const newGroupVisibility = Object.keys(groupVisibility).reduce((acc, key) => {\r\n        acc[key] = newState; // Show or hide all based on the new global state\r\n        return acc;\r\n      }, {});\r\n\r\n      setGroupVisibility(newGroupVisibility);\r\n      return newState;\r\n    });\r\n  };\r\n\r\n  const toggleMonthlySalesVisibility = () => {\r\n    setShowMonthlySales(prevShow => !prevShow); // Toggle the visibility state\r\n\r\n\r\n  };\r\n  return (\r\n    <div className=\"expenditure-container\">\r\n      <h1 className=\"expenditure-title\">{translations[language].relativesKhata}</h1>\r\n      <button onClick={() => setLanguage(lang => lang === 'English' ? 'Urdu' : 'English')} className=\"language-toggle\">\r\n        {language === 'English' ? 'اردو' : 'English'}\r\n      </button>\r\n      <form className=\"expenditure-form\" onSubmit={handleSave}>\r\n        <label htmlFor=\"date\" className=\"expenditure-label\">{translations[language].date}</label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"date\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          className=\"expenditure-input date-input\"\r\n          required\r\n        />\r\n\r\n        <label htmlFor=\"source\" className=\"expenditure-label\">{translations[language].name}</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"source\"\r\n          value={source}\r\n          onChange={(e) => setSource(e.target.value)}\r\n          className=\"expenditure-input\"\r\n          placeholder={translations[language].relativeName}\r\n          required\r\n        />\r\n\r\n        <label htmlFor=\"quantity\" className=\"expenditure-label\">{translations[language].quantity}</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"quantity\"\r\n          value={quantity}\r\n          onChange={(e) => setQuantity(e.target.value)}\r\n          className=\"expenditure-input\"\r\n          placeholder={translations[language].enterQuantity}\r\n          required\r\n        />\r\n\r\n        <label htmlFor=\"amount\" className=\"expenditure-label\">{translations[language].pricePerKilo}</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"amount\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          className=\"expenditure-input\"\r\n          placeholder={translations[language].enterPricePerKilo}\r\n          required\r\n        />\r\n\r\n        <button type=\"submit\" className=\"save-button\">{translations[language].save}</button>\r\n      </form>\r\n      {showModal && (\r\n        <CustomModal\r\n          message={modalMessage}\r\n          onClose={() => setShowModal(false)}\r\n        />\r\n      )}\r\n      <div className=\"expenses-report\">\r\n        <h4>{translations[language].monthlyRelativesSale}</h4>\r\n\r\n        <button onClick={toggleMonthlySalesVisibility} className=\"toggle-all-button\">\r\n          {showMonthlySales ? translations[language].hideAll : translations[language].showAll}\r\n        </button>\r\n\r\n        {showMonthlySales && Object.entries(getMonthlyExpenses()).map(([monthYear, total]) => {\r\n          // Split month and year\r\n          const [month, year] = monthYear.split(' ');\r\n\r\n          // Translate the month name if available, otherwise, use the original name\r\n          const translatedMonth = language === 'Urdu' ? monthTranslations[month] || month : month;\r\n\r\n          // Combine translated month and year\r\n          const translatedMonthYear = `${translatedMonth} ${year}`;\r\n\r\n          return (\r\n            <div key={monthYear} style={{ color: 'green' }}>\r\n              {translations[language].monthlySales} {translatedMonthYear} : {total}\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        <h4>{translations[language].overallRelativesSale}<br /><span style={{ color: 'green' }}>{getOverallExpenses()}</span></h4>\r\n      </div>\r\n      <button onClick={toggleGlobalVisibility} className=\"global-toggle-button\">\r\n        {globalVisibility ? translations[language].hideAll : translations[language].showAll}\r\n      </button>\r\n\r\n      {globalVisibility && Object.entries(groupedExpenses).map(([monthYear, expensesList]) => (\r\n        // Move the statements outside of JSX\r\n        (() => {\r\n          const monthYearArray = monthYear.split(' ');\r\n          const month = monthYearArray[0];\r\n          const year = monthYearArray[1];\r\n\r\n          // Translate the month name if the current language is Urdu\r\n          const translatedMonthName = language === 'Urdu' ? (monthTranslations[month] || month) : month;\r\n\r\n          // Reconstruct the monthYear string with the possibly translated month name\r\n          const displayMonthYear = `${translatedMonthName} ${year}`;\r\n\r\n          return (\r\n            <div key={monthYear}>\r\n              <h3 style={{ marginTop: 15 }}>\r\n                {displayMonthYear}\r\n                <button\r\n                  onClick={() => toggleGroupVisibility(monthYear)}\r\n                  className=\"toggle-button\"\r\n                >\r\n                  {groupVisibility[monthYear] ? translations[language].hide : translations[language].show}\r\n                </button>\r\n              </h3>\r\n              {groupVisibility[monthYear] && (\r\n                <div className=\"expenses-display\">\r\n                  {expensesList.map((expense, index) => {\r\n                    const actualIndex = expenses.findIndex(e => e === expense);\r\n                    const total = expense.quantity * expense.amount;\r\n                    return (\r\n                      <div key={index} className=\"expense-card\">\r\n                        <div>{translations[language].date} : {expense.Date}</div>\r\n                        <div>{translations[language].name} : {expense.Rname}</div>\r\n                        <div>{translations[language].quantity} : {expense.Quantity}</div>\r\n                        <div>{translations[language].pricePerKilo} : {expense.RUnitPrice}</div>\r\n                        <div>{translations[language].total} :  {expense.RTotal}</div>\r\n                        <button onClick={() => handleDelete(actualIndex)} className=\"delete-button1\">{translations[language].delete} </button>\r\n                        <button onClick={() => handleUpdate(actualIndex)} className=\"update-button\">{translations[language].update} </button>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })()\r\n      ))}\r\n\r\n\r\n      {showAlert && (\r\n        <div className=\"alert-dialog\">\r\n          <p>{translations[language].deletePrompt} </p>\r\n          <button onClick={() => handleAlertConfirm(true)} className=\"confirm-yes\">{translations[language].yes} </button>\r\n          <button onClick={() => handleAlertConfirm(false)} className=\"confirm-no\" >{translations[language].no} </button>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default RelativesKhata;\r\n"]},"metadata":{},"sourceType":"module"}